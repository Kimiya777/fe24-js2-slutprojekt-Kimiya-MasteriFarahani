{"mappings":"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","sources":["<anon>","src/main.ts","src/modules/TaskFirebase.ts","src/modules/MembersFirebase.ts","src/modules/render.ts"],"sourcesContent":["const $5ddb56f13a922cfe$export$ca6dda5263526f75 = 'https://slutprojekt-js2-654ce-default-rtdb.europe-west1.firebasedatabase.app/tasks';\nasync function $5ddb56f13a922cfe$export$d1f442602a91e7cc() {\n    const url = $5ddb56f13a922cfe$export$ca6dda5263526f75 + '.json';\n    const res = await fetch(url);\n    const taskObj = await res.json();\n    // console.log(taskObj)\n    return taskObj;\n}\nasync function $5ddb56f13a922cfe$export$13c9d02ca54955a3(tasks) {\n    const url = $5ddb56f13a922cfe$export$ca6dda5263526f75 + '.json';\n    const options = {\n        method: 'POST',\n        body: JSON.stringify(tasks),\n        headers: {\n            'Content-type': 'application/json'\n        }\n    };\n    const res = await fetch(url, options);\n    const data = await res.json();\n//console.log(data);\n}\nasync function $5ddb56f13a922cfe$export$aa6b89df4838b328(id, done) {\n    console.log(id, done);\n    const url = $5ddb56f13a922cfe$export$ca6dda5263526f75 + `/${id}.json`;\n    const options = {\n        method: 'PATCH',\n        body: JSON.stringify({\n            done: done\n        }),\n        headers: {\n            'Content-type': 'application/json'\n        }\n    };\n    const res = await fetch(url, options);\n    const data = await res.json();\n    console.log(data);\n}\nasync function $5ddb56f13a922cfe$export$f08d315250e1aa23(id) {\n    const url = $5ddb56f13a922cfe$export$ca6dda5263526f75 + `/${id}.json`;\n    const options = {\n        method: 'DELETE'\n    };\n    const res = await fetch(url, options);\n    const data = await res.json();\n    console.log(data);\n}\nasync function $5ddb56f13a922cfe$export$13ce2202561ee22c(id, assignedMember) {\n    console.log(id, assignedMember);\n    const url = $5ddb56f13a922cfe$export$ca6dda5263526f75 + `/${id}.json`;\n    const options = {\n        method: 'PATCH',\n        body: JSON.stringify({\n            assignedMember: assignedMember\n        }),\n        headers: {\n            'Content-type': 'application/json'\n        }\n    };\n    const res = await fetch(url, options);\n    const data = await res.json();\n    console.log(data);\n}\nasync function $5ddb56f13a922cfe$export$55d5b641b7d971eb(id, status) {\n    console.log(id, status);\n    const url = $5ddb56f13a922cfe$export$ca6dda5263526f75 + `/${id}.json`;\n    const options = {\n        method: 'PATCH',\n        body: JSON.stringify({\n            status: status\n        }),\n        headers: {\n            'Content-type': 'application/json'\n        }\n    };\n    const res = await fetch(url, options);\n    const data = await res.json();\n    console.log(data);\n}\n\n\nconst $6270a1b9609d7d80$var$BASE_URL = 'https://slutprojekt-js2-654ce-default-rtdb.europe-west1.firebasedatabase.app/members';\nasync function $6270a1b9609d7d80$export$c741440bb0bfe53c() {\n    const url = $6270a1b9609d7d80$var$BASE_URL + '.json';\n    const res = await fetch(url);\n    const memberObj = await res.json();\n    // console.log(taskObj)\n    return memberObj;\n}\nasync function $6270a1b9609d7d80$export$3a1ab9a97c04d55c(members) {\n    const url = $6270a1b9609d7d80$var$BASE_URL + '.json';\n    console.log(members);\n    const options = {\n        method: 'POST',\n        body: JSON.stringify(members),\n        headers: {\n            'Content-type': 'application/json'\n        }\n    };\n    const res = await fetch(url, options);\n    const data = await res.json();\n    console.log(data);\n}\nasync function $6270a1b9609d7d80$export$aa6b89df4838b328(id, role) {\n    console.log(id, role);\n    const url = $6270a1b9609d7d80$var$BASE_URL + `/${id}.json`;\n    const options = {\n        method: 'PATCH',\n        body: JSON.stringify({\n            role: role\n        }),\n        headers: {\n            'Content-type': 'application/json'\n        }\n    };\n    const res = await fetch(url, options);\n    const data = await res.json();\n    console.log(data);\n}\n\n\n\n\n//import { filterByMember, filterByCategory, sortByTimestamp, sortByTitle } from \"./FilterAndSort\";\nconst $1a5d3e8665c01fa1$var$assignButton = document.querySelector('#assign-task-to-member-final');\nconst $1a5d3e8665c01fa1$var$taskSelect = document.querySelector(\"#assign-task-to-member-task\");\nconst $1a5d3e8665c01fa1$var$memberSelect = document.querySelector(\"#assign-task-to-member-member\");\nconst $1a5d3e8665c01fa1$var$sortForm = document.getElementById('sort-form');\nconst $1a5d3e8665c01fa1$var$filterForm = document.getElementById('filter-form');\nconst $1a5d3e8665c01fa1$var$filterCategorySelect = document.getElementById('category-select');\nconst $1a5d3e8665c01fa1$var$filterMemberSelect = document.getElementById('member-select');\nconst $1a5d3e8665c01fa1$var$sortSelect = document.getElementById('sort-tasks');\nfunction $1a5d3e8665c01fa1$export$70637127e9a65bc1(taskObj) {\n    const newTasksContainer = document.querySelector(\"#new-tasks\");\n    const inProgressContainer = document.querySelector(\"#in-progress-tasks\");\n    const doneTasksContainer = document.querySelector(\"#done-tasks\");\n    newTasksContainer.innerHTML = '';\n    inProgressContainer.innerHTML = '';\n    doneTasksContainer.innerHTML = '';\n    $1a5d3e8665c01fa1$var$taskSelect.innerHTML = '';\n    for(const firebaseID in taskObj){\n        const task = taskObj[firebaseID];\n        const container = document.createElement('div');\n        const taskName = document.createElement('h3');\n        container.id = firebaseID;\n        taskName.innerText = task.task;\n        container.append(taskName);\n        const showDate = document.createElement('p');\n        showDate.innerText = `Date: ${task.date}`;\n        container.append(showDate);\n        const showDescription = document.createElement('p');\n        showDescription.innerText = `Description: ${task.description}`;\n        container.append(showDescription);\n        const showAssignedMember = document.createElement('p');\n        showAssignedMember.innerText = `Assigned member: ${task.assignedMember}`;\n        container.append(showAssignedMember);\n        const showDepartment = document.createElement('p');\n        showDepartment.innerText = `Category: ${task.department}`;\n        container.append(showDepartment);\n        if (task.status === \"in progress\") {\n            inProgressContainer.append(container);\n            //Använt chatgpt\n            const checkboxContainer = document.createElement('div');\n            checkboxContainer.style.display = \"flex\";\n            checkboxContainer.style.alignItems = \"center\";\n            checkboxContainer.style.gap = \"5px\"; // Adds spacing\n            const doneLabel = document.createElement('label');\n            doneLabel.innerText = \"Done:\";\n            const doneCheckbox = document.createElement('input');\n            doneCheckbox.type = 'checkbox';\n            doneCheckbox.addEventListener('change', async ()=>{\n                if (doneCheckbox.checked) {\n                    await (0, $5ddb56f13a922cfe$export$55d5b641b7d971eb)(firebaseID, \"done\");\n                    const tasks = await (0, $5ddb56f13a922cfe$export$d1f442602a91e7cc)();\n                    $1a5d3e8665c01fa1$export$70637127e9a65bc1(tasks);\n                }\n            });\n            checkboxContainer.append(doneLabel, doneCheckbox);\n            container.append(checkboxContainer);\n        } else if (task.status === \"done\") {\n            doneTasksContainer.append(container);\n            const deleteContainer = document.createElement('div');\n            deleteContainer.style.display = \"flex\";\n            deleteContainer.style.alignItems = \"center\";\n            deleteContainer.style.gap = \"5px\";\n            //Used chatgpt for creating the labels and buttons\n            //  Add \"Delete:\" label\n            const deleteLabel = document.createElement('label');\n            deleteLabel.innerText = \"Delete:\";\n            //  Add delete button\n            const delBtn = document.createElement('button');\n            delBtn.innerText = 'X';\n            container.append(delBtn);\n            delBtn.addEventListener('click', async ()=>{\n                await (0, $5ddb56f13a922cfe$export$f08d315250e1aa23)(firebaseID);\n                const tasks = await (0, $5ddb56f13a922cfe$export$d1f442602a91e7cc)();\n                $1a5d3e8665c01fa1$export$70637127e9a65bc1(tasks);\n            });\n            // Append label and delete button to container\n            deleteContainer.append(deleteLabel, delBtn);\n            container.append(deleteContainer);\n        } else {\n            newTasksContainer.append(container);\n            const taskOption = document.createElement('option');\n            taskOption.value = firebaseID;\n            taskOption.innerText = task.task;\n            $1a5d3e8665c01fa1$var$taskSelect.append(taskOption);\n        }\n    }\n}\nfunction $1a5d3e8665c01fa1$export$b7761165b12f6717(memberObj) {\n    //console.log(memberObj)\n    const containerAllMembers = document.querySelector(\"#membersContainer\");\n    containerAllMembers.innerHTML = '';\n    $1a5d3e8665c01fa1$var$memberSelect.innerHTML = '';\n    for(const firebaseID in memberObj){\n        //console.log(firebaseID, memberObj[firebaseID]);\n        const container = document.createElement('div');\n        const memberP = document.createElement('h3');\n        container.id = firebaseID;\n        memberP.innerText = memberObj[firebaseID].name;\n        container.append(memberP);\n        containerAllMembers.append(container);\n        const showRole = document.createElement('p');\n        showRole.innerText = `Role: ${memberObj[firebaseID].role}`;\n        container.append(showRole);\n        const membersOptions = document.createElement('option');\n        membersOptions.value = firebaseID;\n        membersOptions.innerText = memberObj[firebaseID].name;\n        $1a5d3e8665c01fa1$var$memberSelect.append(membersOptions);\n        $1a5d3e8665c01fa1$var$memberSelect.value = firebaseID;\n    // const membersAssignSelect = document.querySelector(\"#assign-task-to-member-member\") as HTMLSelectElement;\n    // Om task är utförd, stryk över och lägg till deleteknapp\n    // Uppdatera done, true till false, eller false till true\n    }\n}\n$1a5d3e8665c01fa1$var$assignButton.addEventListener('click', async (event)=>{\n    event.preventDefault();\n    const selectedTaskID = $1a5d3e8665c01fa1$var$taskSelect.value;\n    const selectedMemberID = $1a5d3e8665c01fa1$var$memberSelect.value;\n    console.log(selectedTaskID);\n    // console.log(\"hej\");\n    if (!selectedTaskID || !selectedMemberID) {\n        console.log(\"Please select both a task and a member.\");\n        return;\n    }\n    const members = await (0, $6270a1b9609d7d80$export$c741440bb0bfe53c)();\n    const tasks2 = await (0, $5ddb56f13a922cfe$export$d1f442602a91e7cc)();\n    const selectedMember = members[selectedMemberID];\n    /** \r\n    if (!selectedMember) {\r\n        console.log(\"Error: Member not found!\");\r\n        return;\r\n    }\r\n\r\n    **/ const memberDepartment = members[selectedMemberID].role;\n    const taskDepartment = tasks2[selectedTaskID].department;\n    console.log(\"Member's Role:\", memberDepartment);\n    console.log(\"Task's Department:\", taskDepartment);\n    if (memberDepartment === taskDepartment) {\n        await (0, $5ddb56f13a922cfe$export$13ce2202561ee22c)(selectedTaskID, selectedMember.name);\n        await (0, $5ddb56f13a922cfe$export$55d5b641b7d971eb)(selectedTaskID, \"in progress\");\n        // Uppdaterar tasks efter att ha assignat\n        const tasks = await (0, $5ddb56f13a922cfe$export$d1f442602a91e7cc)();\n        $1a5d3e8665c01fa1$export$70637127e9a65bc1(tasks);\n    } else console.log('choose a member whose role matches the department of your chosen task');\n});\n\n\n//import { activateSortingAndFiltering } from \"./modules/FilterAndSort.ts\";\n//import { TaskArray } from \"./modules/types.ts\";\n(0, $5ddb56f13a922cfe$export$d1f442602a91e7cc)().then((0, $1a5d3e8665c01fa1$export$70637127e9a65bc1));\n(0, $6270a1b9609d7d80$export$c741440bb0bfe53c)().then((0, $1a5d3e8665c01fa1$export$b7761165b12f6717));\nconst $ad2bcec7a0192558$var$taskForm = document.getElementById('task-form');\nconst $ad2bcec7a0192558$export$c131bf539d195aab = document.getElementById('member-form');\nconst $ad2bcec7a0192558$var$taskDepartmentSelect = document.getElementById('task-department-select');\nconst $ad2bcec7a0192558$var$memberSelect = document.getElementById('member-select');\nconst $ad2bcec7a0192558$var$taskDescription = document.getElementById('task-description');\nconst $ad2bcec7a0192558$var$taskName = document.getElementById('task-name');\n//const assignButton = document.getElementById('assign-task-to-member-final') as HTMLButtonElement;\n$ad2bcec7a0192558$var$taskForm.addEventListener('submit', async (event)=>{\n    event.preventDefault();\n    const task = $ad2bcec7a0192558$var$taskName.value;\n    const department = $ad2bcec7a0192558$var$taskDepartmentSelect.value;\n    console.log(task);\n    const TaskDate = new Date(Date.now());\n    const TaskDate2 = TaskDate.toString();\n    const description = $ad2bcec7a0192558$var$taskDescription.value;\n    const taskObj = {\n        task: task,\n        done: false,\n        department: department,\n        date: TaskDate2,\n        status: 'new',\n        assignedMember: 'none',\n        description: description\n    };\n    await (0, $5ddb56f13a922cfe$export$13c9d02ca54955a3)(taskObj);\n    const tasks = await (0, $5ddb56f13a922cfe$export$d1f442602a91e7cc)();\n    (0, $1a5d3e8665c01fa1$export$70637127e9a65bc1)(tasks);\n});\n$ad2bcec7a0192558$export$c131bf539d195aab.addEventListener('submit', async (event)=>{\n    event.preventDefault();\n    const member = $ad2bcec7a0192558$export$c131bf539d195aab.querySelector('input').value;\n    const memberRole = $ad2bcec7a0192558$var$memberSelect.value;\n    console.log(member);\n    const memberObj = {\n        name: member,\n        role: memberRole\n    };\n    await (0, $6270a1b9609d7d80$export$3a1ab9a97c04d55c)(memberObj);\n    const members = await (0, $6270a1b9609d7d80$export$c741440bb0bfe53c)();\n    (0, $1a5d3e8665c01fa1$export$b7761165b12f6717)(members);\n});\n\n\n//# sourceMappingURL=index.525a704b.js.map\n","import { getAllTasks, postTask, BASE_URL, assignTask} from \"./modules/TaskFirebase\";\r\nimport { getAllMembers, postMembers } from \"./modules/MembersFirebase\";\r\nimport { renderAllTasks, renderAllMembers} from \"./modules/render\";\r\nimport { Member, Task } from \"./modules/types.ts\";\r\n//import { activateSortingAndFiltering } from \"./modules/FilterAndSort.ts\";\r\n//import { TaskArray } from \"./modules/types.ts\";\r\n\r\ngetAllTasks().then( renderAllTasks );\r\ngetAllMembers().then( renderAllMembers );\r\n\r\nconst taskForm = document.getElementById('task-form') as HTMLFormElement;\r\nexport const memberForm = document.getElementById('member-form') as HTMLFormElement;\r\n\r\nconst taskDepartmentSelect = document.getElementById('task-department-select') as HTMLSelectElement;\r\nconst memberSelect = document.getElementById('member-select') as HTMLSelectElement;\r\n\r\nconst taskDescription= document.getElementById('task-description') as HTMLInputElement;\r\nconst taskName= document.getElementById('task-name') as HTMLInputElement;\r\n\r\n//const assignButton = document.getElementById('assign-task-to-member-final') as HTMLButtonElement;\r\n\r\ntaskForm!.addEventListener('submit', async event =>{\r\n    event.preventDefault();\r\n\r\n    const task = taskName!.value;\r\n    const department = taskDepartmentSelect!.value;\r\n    console.log(task);\r\n\r\n    const TaskDate = new Date(Date.now());\r\n    const TaskDate2 = TaskDate.toString();\r\n\r\n    const description = taskDescription!.value;\r\n\r\n    const taskObj:Task = {\r\n        task,\r\n        done: false,\r\n        department,\r\n        date: TaskDate2,\r\n        status: 'new',\r\n        assignedMember: 'none',\r\n        description,\r\n        \r\n    }\r\n\r\n    await postTask(taskObj);\r\n    const tasks = await getAllTasks();\r\n    renderAllTasks(tasks);\r\n})\r\n\r\nmemberForm!.addEventListener('submit', async event =>{\r\n    event.preventDefault();\r\n\r\n    const member = memberForm.querySelector('input')!.value;\r\n    const memberRole = memberSelect!.value;\r\n\r\n    \r\n\r\n    console.log(member);\r\n\r\n    const memberObj:Member = {\r\n\r\n        name: member,\r\n        role: memberRole,\r\n \r\n    }\r\n\r\n    await postMembers(memberObj);\r\n    const members = await getAllMembers();\r\n    renderAllMembers(members);\r\n})\r\n\r\n\r\n","export const BASE_URL = 'https://slutprojekt-js2-654ce-default-rtdb.europe-west1.firebasedatabase.app/tasks';\r\n\r\nimport { Task} from \"./types.ts\";\r\n//import {TaskArray} from \"./types.ts\";\r\n\r\nexport async function getAllTasks():Promise<Object>{\r\n    const url = BASE_URL+'.json'\r\n\r\n    const res = await fetch(url);\r\n    const taskObj = await res.json();\r\n    // console.log(taskObj)\r\n\r\n    return taskObj;\r\n    \r\n}\r\n\r\nexport async function postTask(tasks: Task){\r\n    const url = BASE_URL+'.json';\r\n\r\n    const options = {\r\n        method: 'POST',\r\n        body: JSON.stringify(tasks),\r\n        headers: {\r\n            'Content-type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const res = await fetch(url, options);\r\n    const data = await res.json();\r\n    //console.log(data);\r\n}\r\n\r\nexport async function patchDone(id:string, done:boolean){\r\n    console.log(id, done)\r\n\r\n    const url = BASE_URL + `/${id}.json`;\r\n    const options = {\r\n        method: 'PATCH', \r\n        body: JSON.stringify( {done} ),\r\n        headers: {\r\n            'Content-type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const res = await fetch(url, options);\r\n    const data = await res.json();\r\n    console.log(data);\r\n}\r\n\r\nexport async function deleteTask(id:string){\r\n    const url = BASE_URL + `/${id}.json`;\r\n    const options = {\r\n        method: 'DELETE'\r\n    }\r\n    \r\n    const res = await fetch(url, options);\r\n    const data = await res.json();\r\n    console.log(data);\r\n}\r\n\r\n\r\n\r\nexport async function assignTask(id:string, assignedMember:string){\r\n    console.log(id, assignedMember)\r\n\r\n    const url = BASE_URL + `/${id}.json`;\r\n    const options = {\r\n        method: 'PATCH', \r\n        body: JSON.stringify( {assignedMember} ),\r\n        headers: {\r\n            'Content-type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const res = await fetch(url, options);\r\n    const data = await res.json();\r\n    console.log(data);\r\n}\r\n\r\n\r\nexport async function changeTaskStatus(id:string, status:string){\r\n    console.log(id, status)\r\n\r\n    const url = BASE_URL + `/${id}.json`;\r\n    const options = {\r\n        method: 'PATCH', \r\n        body: JSON.stringify( {status} ),\r\n        headers: {\r\n            'Content-type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const res = await fetch(url, options);\r\n    const data = await res.json();\r\n    console.log(data);\r\n}","const BASE_URL = 'https://slutprojekt-js2-654ce-default-rtdb.europe-west1.firebasedatabase.app/members';\r\n\r\nimport { Member } from \"./types\";\r\n\r\nexport async function getAllMembers():Promise<Object>{\r\n    const url = BASE_URL+'.json'\r\n\r\n    const res = await fetch(url);\r\n    const memberObj = await res.json();\r\n    // console.log(taskObj)\r\n\r\n    return memberObj;\r\n}\r\n\r\nexport async function postMembers(members: Member){\r\n    const url = BASE_URL+'.json';\r\nconsole.log(members);\r\n    const options = {\r\n        method: 'POST',\r\n        body: JSON.stringify(members),\r\n        headers: {\r\n            'Content-type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const res = await fetch(url, options);\r\n    const data = await res.json();\r\n    console.log(data);\r\n}\r\n\r\nexport async function patchDone(id:string, role:string){\r\n    console.log(id, role)\r\n\r\n    const url = BASE_URL + `/${id}.json`;\r\n    const options = {\r\n        method: 'PATCH', \r\n        body: JSON.stringify( {role} ),\r\n        headers: {\r\n            'Content-type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const res = await fetch(url, options);\r\n    const data = await res.json();\r\n    console.log(data);\r\n}\r\n","import { deleteTask, getAllTasks, patchDone, assignTask, changeTaskStatus } from \"./TaskFirebase.ts\";\r\nimport { getAllMembers } from \"./MembersFirebase.ts\";\r\nimport { memberForm } from \"../main.ts\";\r\n//import { filterByMember, filterByCategory, sortByTimestamp, sortByTitle } from \"./FilterAndSort\";\r\n\r\nconst assignButton = document.querySelector('#assign-task-to-member-final') as HTMLButtonElement;\r\n\r\nconst taskSelect = document.querySelector(\"#assign-task-to-member-task\") as HTMLSelectElement;\r\nconst memberSelect = document.querySelector(\"#assign-task-to-member-member\") as HTMLSelectElement;\r\n\r\n\r\nconst sortForm = document.getElementById('sort-form') as HTMLFormElement;\r\nconst filterForm = document.getElementById('filter-form') as HTMLFormElement;\r\nconst filterCategorySelect = document.getElementById('category-select') as HTMLSelectElement;\r\nconst filterMemberSelect = document.getElementById('member-select') as HTMLSelectElement;\r\nconst sortSelect = document.getElementById('sort-tasks') as HTMLSelectElement;\r\n\r\nexport function renderAllTasks(taskObj: Object) {\r\n    const newTasksContainer = document.querySelector(\"#new-tasks\") as HTMLDivElement;\r\n    const inProgressContainer = document.querySelector(\"#in-progress-tasks\") as HTMLDivElement;\r\n    const doneTasksContainer = document.querySelector(\"#done-tasks\") as HTMLDivElement;\r\n\r\n    newTasksContainer.innerHTML = '';\r\n    inProgressContainer.innerHTML = '';\r\n    doneTasksContainer.innerHTML = '';\r\n    taskSelect.innerHTML = '';\r\n\r\n    for (const firebaseID in taskObj) {\r\n        const task = taskObj[firebaseID];\r\n\r\n        const container = document.createElement('div');\r\n        const taskName = document.createElement('h3');\r\n\r\n        container.id = firebaseID;\r\n        taskName.innerText = task.task;\r\n        container.append(taskName);\r\n\r\n        const showDate = document.createElement('p');\r\n        showDate.innerText = `Date: ${task.date}`;\r\n        container.append(showDate);\r\n\r\n        const showDescription = document.createElement('p');\r\n        showDescription.innerText = `Description: ${task.description}`;\r\n        container.append(showDescription);\r\n\r\n        const showAssignedMember = document.createElement('p');\r\n        showAssignedMember.innerText = `Assigned member: ${task.assignedMember}`;\r\n        container.append(showAssignedMember);\r\n\r\n        const showDepartment = document.createElement('p');\r\n        showDepartment.innerText = `Category: ${task.department}`;\r\n        container.append(showDepartment);\r\n\r\n        if (task.status === \"in progress\") {\r\n\r\n            inProgressContainer.append(container);\r\n\r\n            //Använt chatgpt\r\n            const checkboxContainer = document.createElement('div');\r\n            checkboxContainer.style.display = \"flex\";\r\n            checkboxContainer.style.alignItems = \"center\";\r\n            checkboxContainer.style.gap = \"5px\"; // Adds spacing\r\n\r\n            const doneLabel = document.createElement('label');\r\n            doneLabel.innerText = \"Done:\";\r\n\r\n            const doneCheckbox = document.createElement('input');\r\n            doneCheckbox.type = 'checkbox';\r\n            doneCheckbox.addEventListener('change', async () => {\r\n                if (doneCheckbox.checked) {\r\n                    await changeTaskStatus(firebaseID, \"done\");\r\n                    const tasks = await getAllTasks();\r\n                    renderAllTasks(tasks);\r\n\r\n                }\r\n            });\r\n\r\n            checkboxContainer.append(doneLabel, doneCheckbox);\r\n            container.append(checkboxContainer);\r\n        }\r\n        else if (task.status === \"done\") {\r\n\r\n            doneTasksContainer.append(container);\r\n\r\n            const deleteContainer = document.createElement('div');\r\n            deleteContainer.style.display = \"flex\";\r\n            deleteContainer.style.alignItems = \"center\";\r\n            deleteContainer.style.gap = \"5px\";\r\n\r\n            //Used chatgpt for creating the labels and buttons\r\n            //  Add \"Delete:\" label\r\n            const deleteLabel = document.createElement('label');\r\n            deleteLabel.innerText = \"Delete:\";\r\n\r\n            //  Add delete button\r\n            const delBtn = document.createElement('button');\r\n            delBtn.innerText = 'X';\r\n            container.append(delBtn);\r\n\r\n            delBtn.addEventListener('click', async () => {\r\n                await deleteTask(firebaseID);\r\n                const tasks = await getAllTasks();\r\n                renderAllTasks(tasks);\r\n            });\r\n\r\n\r\n            // Append label and delete button to container\r\n            deleteContainer.append(deleteLabel, delBtn);\r\n            container.append(deleteContainer);\r\n        }\r\n        else {\r\n            newTasksContainer.append(container);\r\n\r\n            const taskOption = document.createElement('option') as HTMLOptionElement;\r\n            taskOption.value = firebaseID;\r\n            taskOption.innerText = task.task;\r\n            taskSelect.append(taskOption);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function renderAllMembers(memberObj: Object) {\r\n    //console.log(memberObj)\r\n\r\n    const containerAllMembers = document.querySelector(\"#membersContainer\") as HTMLDivElement;\r\n    containerAllMembers.innerHTML = '';\r\n    memberSelect.innerHTML = '';\r\n\r\n    for (const firebaseID in memberObj) {\r\n        //console.log(firebaseID, memberObj[firebaseID]);\r\n\r\n        const container = document.createElement('div');\r\n        const memberP = document.createElement('h3');\r\n\r\n\r\n        container.id = firebaseID;\r\n        memberP.innerText = memberObj[firebaseID].name;\r\n\r\n        container.append(memberP);\r\n        containerAllMembers.append(container);\r\n\r\n        const showRole = document.createElement('p');\r\n        showRole.innerText = `Role: ${memberObj[firebaseID].role}`;\r\n        container.append(showRole);\r\n\r\n        const membersOptions = document.createElement('option') as HTMLOptionElement;\r\n        membersOptions.value = firebaseID;\r\n        membersOptions.innerText = memberObj[firebaseID].name;\r\n        memberSelect.append(membersOptions);\r\n        memberSelect.value = firebaseID;\r\n\r\n        // const membersAssignSelect = document.querySelector(\"#assign-task-to-member-member\") as HTMLSelectElement;\r\n\r\n\r\n\r\n\r\n        // Om task är utförd, stryk över och lägg till deleteknapp\r\n\r\n\r\n        // Uppdatera done, true till false, eller false till true\r\n\r\n\r\n    }\r\n}\r\n\r\n\r\nassignButton.addEventListener('click', async event => {\r\n\r\n    event.preventDefault();\r\n\r\n    const selectedTaskID = taskSelect.value;\r\n    const selectedMemberID = memberSelect.value;\r\n\r\n    console.log(selectedTaskID);\r\n    // console.log(\"hej\");\r\n\r\n    if (!selectedTaskID || !selectedMemberID) {\r\n        console.log(\"Please select both a task and a member.\");\r\n        return;\r\n    }\r\n\r\n    const members = await getAllMembers();\r\n    const tasks2 = await getAllTasks();\r\n\r\n    const selectedMember = members[selectedMemberID];\r\n\r\n/** \r\n    if (!selectedMember) {\r\n        console.log(\"Error: Member not found!\");\r\n        return;\r\n    }\r\n\r\n    **/\r\n    const memberDepartment = members[selectedMemberID].role;\r\n    const taskDepartment = tasks2[selectedTaskID].department;\r\n\r\n    console.log(\"Member's Role:\", memberDepartment);\r\n    console.log(\"Task's Department:\", taskDepartment);\r\n\r\n    if (memberDepartment === taskDepartment) {\r\n\r\n        await assignTask(selectedTaskID, selectedMember.name);\r\n        await changeTaskStatus(selectedTaskID, \"in progress\");\r\n\r\n        // Uppdaterar tasks efter att ha assignat\r\n        const tasks = await getAllTasks();\r\n        renderAllTasks(tasks);\r\n    }\r\n    else {\r\n        console.log('choose a member whose role matches the department of your chosen task');\r\n    }\r\n});"],"names":["$5ddb56f13a922cfe$export$ca6dda5263526f75","$5ddb56f13a922cfe$export$d1f442602a91e7cc","res","fetch","json","$5ddb56f13a922cfe$export$13c9d02ca54955a3","tasks","options","method","body","JSON","stringify","headers","$5ddb56f13a922cfe$export$f08d315250e1aa23","id","url","console","log","$5ddb56f13a922cfe$export$13ce2202561ee22c","assignedMember","$5ddb56f13a922cfe$export$55d5b641b7d971eb","status","$6270a1b9609d7d80$var$BASE_URL","$6270a1b9609d7d80$export$c741440bb0bfe53c","$6270a1b9609d7d80$export$3a1ab9a97c04d55c","members","$1a5d3e8665c01fa1$var$assignButton","document","querySelector","$1a5d3e8665c01fa1$var$taskSelect","$1a5d3e8665c01fa1$var$memberSelect","$1a5d3e8665c01fa1$export$70637127e9a65bc1","taskObj","newTasksContainer","inProgressContainer","doneTasksContainer","firebaseID","innerHTML","task","container","createElement","taskName","innerText","append","showDate","date","showDescription","description","showAssignedMember","showDepartment","department","checkboxContainer","style","display","alignItems","gap","doneLabel","doneCheckbox","type","addEventListener","checked","deleteContainer","deleteLabel","delBtn","taskOption","value","$1a5d3e8665c01fa1$export$b7761165b12f6717","memberObj","containerAllMembers","memberP","name","showRole","role","membersOptions","getElementById","event","preventDefault","selectedTaskID","selectedMemberID","tasks2","selectedMember","memberDepartment","taskDepartment","then","$ad2bcec7a0192558$var$taskForm","$ad2bcec7a0192558$export$c131bf539d195aab","$ad2bcec7a0192558$var$taskDepartmentSelect","$ad2bcec7a0192558$var$memberSelect","$ad2bcec7a0192558$var$taskDescription","$ad2bcec7a0192558$var$taskName","TaskDate2","TaskDate","Date","now","toString","done","member","memberRole"],"version":3,"file":"index.525a704b.js.map"}